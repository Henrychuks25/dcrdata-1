{{define "tx"}}
<!DOCTYPE html>
<html lang="en">
{{template "html-head" printf "Decred Transaction %.20s..." .TxID}}
<body>
{{template "navbar"}}

<div class="container">

    <div class="row justify-content-between">
        <div class="col-md-8 col-sm-6">
            <h4 class="mb-2">
                Transaction
                <div class="lh1rem">
                     <span class="break-word fs15 w80">{{.TxID}}</span>
                    <a class="fs13 nowrap" href="/api/tx/{{.TxID}}?indent=true">view raw</a>
                </div>
            </h4>
            <table class="table-centered-1rem">
                {{if gt $.Block.BlockHeight 0}}
                    <tr>
                        <td class="text-right pr-2 h1rem p03rem0 xs-w91">INCLUDED IN BLOCK</td>
                        <td>
                             <a href="/explorer/block/{{$.Block.BlockHash}}" class="fs18">{{$.Block.BlockHeight | int64Comma}}</a>
                        </td>
                    </tr>
                {{end}}
                <tr>
                    <td class="text-right pr-2 h1rem p03rem0">TYPE</td>
                    <td>
                        {{$.Type}}
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-md-4 col-sm-6 d-flex">

            <table>
                <tr class="h2rem">
                    <td class="text-right pr-2 nowrap">TOTAL SENT</td>
                    <td class="fs28 mono d-flex align-items-center"><span class="dcr">{{ .Vout | getTotalFromTx | float64Commaf}}</span></td>
                </tr>
                <tr>
                    <td class="text-right pr-2">SIZE</td>
                    <td class="mono">{{.Size | formatBytes}}</td>
                </tr>
                {{if .Fee }}
                {{if gt $.Fee 0}}
                <tr>
                    <td class="text-right pr-2">FEE</td>
                    <td class="mono">{{$.Fee}}</td>
                </tr>
                {{end}}
                {{end}}
                {{if .FeeRate}}
                {{if gt $.Fee 0}}
                <tr>
                    <td class="text-right pr-2">RATE</td>
                    <td class="mono">{{$.FeeRate}}/kB</td>
                </tr>
                {{end}}
                {{end}}
                <tr>
                    <td class="text-right pr-2">TIME</td>
                    <td class="lh1rem">
                        {{if eq $.Block.Time 0}}
                            N/A
                        {{else}}
                            <span class="hidden timestamp">{{$.Block.Time}}</span>
                            ({{timezone}}) {{$.Block.Time | getTime }} <span class="op60 fs12 nowrap">(<span class="age">{{$.Block.Time}}</span> ago)</span>
                        {{end}}
                    </td>
                </tr>
            </table>

        </div>
    </div>

    <div class="row">
        <div class="col-md-7 mb-3">
            <h4>Input</h4>
            <table class="table table-mono-cells table-sm striped">
                <thead>
                    <th>Previous Outpoint</th>
                    <th>Addresses</th>
                    <!-- <th>Tree</th> -->
                    <th class="text-center">Block</th>
                    <th class="text-center">DCR</th>
                </thead>
                <tbody>
                    {{range $i, $vin := .Vin}}
                    <tr>
                        <td class="break-word">
                            {{if $vin.Coinbase}}
                                Coinbase: {{ $vin.Coinbase }}
                            {{else if eq $vin.Txid "0000000000000000000000000000000000000000000000000000000000000000"}}
                                Vote Reward
                            {{else}}
                            <a href="/explorer/tx/{{$vin.Txid}}"><span class="break-word">{{$vin.Txid}}:{{$vin.Vout}}</span></a>
                            {{end}}
                        </td>
                        <td class="break-word">
                        {{with $as := index $.VinAddrs $i}}
                            {{if (len $as) gt 0}}
                                <a href="/explorer/address/{{index $as 0}}">{{index $as 0}}</a>
                            {{else}}
                                N/A
                            {{end}}
                        {{end}}
                        </td>
                        <!-- <td>{{$vin.Tree}}</td> -->
                        <td>
                        {{if $vin.Coinbase}}
                            Created
                        {{else if eq $vin.Txid "0000000000000000000000000000000000000000000000000000000000000000"}}
                            Created
                        {{else if eq $vin.BlockHeight 0}}
                            Pending
                        {{else}}
                            <a class="mono fs13" href="/explorer/block/{{$.Block.BlockHash}}">{{$vin.BlockHeight}}</a></td>
                        {{end}}
                        </td>
                        <td class="dcr mono fs13 text-right">{{if lt $vin.AmountIn 0.0}} N/A {{else}} {{float64Commaf $vin.AmountIn}} {{end}}</td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        <div class="col-md-5 mb-3">
            <h4>Output</h4>
            <table class="table table-mono-cells table-sm striped">
                <thead>
                    <th>Address</th>
                    <th class="text-center">Type</th>
                    <th class="text-center">DCR</th>
                </thead>
                <tbody>
                    {{range .Vout}}
                    {{ if ne .Value 0.0}}
                    <tr>
                        <td class="break-word">
                            {{range .ScriptPubKeyDecoded.Addresses}}
                                <a href="/explorer/address/{{.}}">{{.}}</a>
                            {{end}}
                        </td>
                        <td>
                            {{.ScriptPubKeyDecoded.Type}}
                        </td>
                        <td class="dcr text-right">
                            {{.Value | float64Commaf}}
                        </td>
                    </tr>
                    {{end}}
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>
    {{if .VoteInfo}}
    {{with .VoteInfo}}
    <div class="row mb-3">
        <div class="col-md-12">
            <h4>Vote Info</h4>
            <p>Version: <span class="mono">{{.Version}}</span> | Bits: <span class="mono">{{printf "%#04x" .Bits}}</span></p>
            <table class="table striped">
                <thead>
                    <th class="text-right">Issue ID</th>
                    <th>Issue Description</th>
                    <th>Choice ID</th>
                    <th>Choice Description</th>
                </thead>
                <tbody>
                    {{range .Choices}}
                    <tr>
                        <td class="text-right"><span class="highlight-text">{{.ID}}</span></td>
                        <td>{{.Description}}</td>
                        <td>
                            <span class="agenda-voting-overview-option-dot _{{.Choice.Id}}"></span>
                            {{.Choice.Id}}
                        </td>
                        <td>{{.Choice.Description}}</td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>
    {{end}}
    {{end}}
</div>

{{template "footer"}}

</body>
</html>
{{end}}

